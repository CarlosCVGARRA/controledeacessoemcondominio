<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Formulário do Morador - Condomínio</title>
<style>
  :root {
    --cor-fundo: #681313;
    --cor-fundo-form: #fff;
    --cor-botao: #007bff;
    --cor-botao-desativado: #ccc;
    --cor-texto-botao: #fff;
    --cor-texto-erro: red;
    --cor-input-fundo: #fff;
    --cor-input-borda: #ccc;
    --cor-fundo-foto: #fafafa;
    --fonte-principal: Arial, sans-serif;
    --border-radius: 5px;
  }
  body {
    font-family: var(--fonte-principal);
    background: var(--cor-fundo);
    padding: 20px;
    max-width: 900px;
    margin: auto;
  }
  h1, h2 {
    text-align: center;
  }

body {
  margin: 0;
  padding: 20px;
  font-family: var(--fonte-principal);
  background: var(--cor-fundo);
  width: 100vw;       /* largura total da janela */
  max-width: 100vw;   /* remove limite máximo */
  overflow-x: hidden; /* evita scroll horizontal */
  box-sizing: border-box; /* evita estouro de largura */
}

h1, h2 {
  text-align: center;
}

#containerPrincipal {
  display: flex;
  gap: 20px;
  width: 100%;       /* ocupa 100% da largura do body */
  max-width: none;   /* remove limite */
  margin: auto;
}

#ladoEsquerdo {
  width: 50%;        /* lado esquerdo maior */
}

#ladoDireito {
  width: 50%;        /* lado direito menor */
}

  form {
    background: var(--cor-fundo-form);
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  label {
    display: block;
    margin-top: 10px;
    font-weight: bold;
  }
  input[type="text"],
  input[type="date"],
  input[type="time"],
  input[type="datetime-local"],
  input[type="file"],
  textarea,
  select {
    width: 100%;
    padding: 7px;
    margin-top: 5px;
    box-sizing: border-box;
    border-radius: var(--border-radius);
    border: 1px solid var(--cor-input-borda);
    background: var(--cor-input-fundo);
  }
  textarea {
    resize: vertical;
  }
  .inline-group {
    display: flex;
    gap: 10px;
  }
  .inline-group > div {
    flex: 1;
  }
  .foto-3x4 {
    margin-top: 10px;
    max-width: 150px;
    max-height: 200px;
    border: 1px solid var(--cor-input-borda);
    background: var(--cor-fundo-foto);
    object-fit: contain;
  }
  button {
    background: var(--cor-botao);
    color: var(--cor-texto-botao);
    padding: 10px 20px;
    font-weight: bold;
    border: none;
    border-radius: var(--border-radius);
    cursor: pointer;
    margin-top: 10px;
  }
  button:disabled {
    background: var(--cor-botao-desativado);
    cursor: default;
  }
  .subtitulo {
    margin-top: 15px;
    border-bottom: 1px solid #ddd;
    padding-bottom: 5px;
  }
  .flex-row {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }
  .flex-row > div {
    flex: 1;
    min-width: 200px;
  }
  .adicionar-btn {
    margin-top: 10px;
  }
  #statusMsg {
    margin-top: 10px;
    font-size: 14px;
    color: green;
    text-align: center;
  }
  #errorMsg {
    margin-top: 10px;
    font-size: 14px;
    color: var(--cor-texto-erro);
    text-align: center;
  }
</style>
<style>
  :root {
    --cor-fundo-caixa: #fff;
    --cor-borda-caixa: #ccc;
    --cor-fundo-item: #f9f9f9;
    --cor-fundo-item-hover: #e0e0e0;
    --cor-botao-editar: #007bff;
    --cor-botao-apagar: #d9534f;
    --cor-texto-botao: #fff;
    --raio-borda-caixa: 10px;
    --padding-caixa: 15px;
    --padding-item: 8px 12px;
    --margin-item: 6px 0;
  }

  #listaContainer {
    background: var(--cor-fundo-caixa);
    border: 1px solid var(--cor-borda-caixa);
    border-radius: var(--raio-borda-caixa);
    max-height: 600px;
    overflow-y: auto;
    padding: var(--padding-caixa);
    margin-top: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }

  #resultadosMoradores {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  #resultadosMoradores li {
    background: var(--cor-fundo-item);
    border-radius: 6px;
    padding: var(--padding-item);
    margin: var(--margin-item);
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: background 0.3s ease;
    gap: 8px;
  }

  #resultadosMoradores li:hover {
    background: var(--cor-fundo-item-hover);
  }

  #resultadosMoradores li span {
    flex: 1;
    font-weight: 600;
    font-size: 14px;
    user-select: none;
  }

  #resultadosMoradores li button {
    border: none;
    padding: 6px 12px;
    border-radius: 5px;
    font-weight: bold;
    cursor: pointer;
    color: var(--cor-texto-botao);
    transition: background 0.3s ease;
  }

  #resultadosMoradores li button:first-of-type {
    background: var(--cor-botao-editar);
  }

  #resultadosMoradores li button:first-of-type:hover {
    background: #0056b3;
  }

  #resultadosMoradores li button:last-of-type {
    background: var(--cor-botao-apagar);
  }

  #resultadosMoradores li button:last-of-type:hover {
    background: #b02a37;
  }
</style>

</head>
<body>

<h1>Formulário do Morador</h1>

<div id="containerPrincipal">
  <!-- Lado esquerdo: Formulário para adicionar morador novo -->
  <div id="ladoEsquerdo">
    <form id="formMorador">

      <section>
        <h2>Dados Pessoais</h2>
        <label>Nome Completo:
          <input type="text" id="nome" />
        </label>
        <label>CPF:
          <input type="text" id="cpf" maxlength="14" placeholder="000.000.000-00" />
        </label>
        <label>RG:
          <input type="text" id="rg" />
        </label>
        <label>CNH:
          <input type="text" id="cnh" />
        </label>

        <label>Endereço Completo:</label>
        <div class="flex-row">
          <div><input type="text" id="rua" placeholder="Rua" /></div>
          <div><input type="text" id="quadra" placeholder="Quadra" /></div>
          <div><input type="text" id="lote" placeholder="Lote" /></div>
          <div><input type="text" id="numero" placeholder="Número" /></div>
        </div>
        <label>CEP:
          <input type="text" id="cep" maxlength="9" placeholder="00000-000" />
        </label>
        <label>Próximo a:
          <input type="text" id="proximo" />
        </label>
      </section>

      <section>
        <h2>Placas de Veículos</h2>
        <div id="placasContainer"></div>
        <button type="button" id="btnAddPlaca" class="adicionar-btn">Adicionar Placa</button>
      </section>

      <section>
        <h2>Familiares e Contatos</h2>
        <div id="familiaresContainer"></div>
        <button type="button" id="btnAddFamiliar" class="adicionar-btn">Adicionar Familiar / Contato</button>
      </section>

      <section>
        <h2>Permissões</h2>
        <label>Quem pode entrar sem necessidade de permissão:
          <textarea id="permissoes" rows="3" placeholder="Digite nomes, cargos ou relacionamentos..."></textarea>
        </label>
      </section>

      <section>
        <h2>Observações</h2>
        <textarea id="observacoes" rows="4" placeholder="Observações adicionais..."></textarea>
      </section>

      <section>
        <h2>Penalidades</h2>
        <textarea id="penalidades" rows="3" placeholder="Penalidades aplicadas..."></textarea>
      </section>

      <section>
        <h2>Foto 3x4</h2>
        <input type="file" id="foto3x4" accept="image/*" />
        <br />
        <img id="imgFoto" class="foto-3x4" src="" alt="Foto 3x4" />
      </section>

      <section>
        <h2>Informações de edição</h2>
        <p>Data e Hora Atual: <span id="dataHoraAtual"></span></p>
        <label>Última edição salva:
          <input type="datetime-local" id="ultimaEdicao" disabled />
        </label>
      </section>

      <button type="button" id="btnSalvar">Salvar Dados no localStorage e baixar JSON</button>
      <button type="button" id="btnCarregar">Carregar Dados do arquivo JSON</button>
      <input type="file" id="inputCarregarArquivo" style="display:none" accept=".json" />

      <div id="statusMsg"></div>
      <div id="errorMsg"></div>
    </form>
  </div>

<!-- Lado direito: Botões para ver lista e apagar morador -->
<div id="ladoDireito">
<div id="listaContainer" style="display:block; margin-top:20px; background:#fff; padding:15px; border:1px solid #ccc; border-radius:10px; max-height: 600px; overflow-y: auto;">
  <h2>Lista de Moradores</h2>
  <div style="display:flex; gap: 8px; margin-bottom: 10px;">
    <input type="text" id="buscaMorador" placeholder="Digite nome, CPF ou RG..." style="flex:1; padding:8px;" />
    <button type="button" id="btnBuscar" style="padding:8px 16px; background:green; color:white; border:none; border-radius:5px; cursor:pointer; font-weight:bold;">Buscar</button>
  </div>
  <ul id="resultadosMoradores" style="list-style:none; padding:0; max-height: 400px; overflow-y: auto;"></ul>
</div>

<script>
  // Pega parâmetros da URL
  const urlParams = new URLSearchParams(window.location.search);
  let nivel = urlParams.get('acesso');

  if (!nivel) {
    nivel = localStorage.getItem('nivelAcessoCond') || 'visitante';
  }

  const idMorador = urlParams.get('id');  
  const modoNovo = urlParams.get('novo') === 'true';

  // Permissões de edição por nível
  const permissoes = {
    admin: { podeEditar: true, podeEditarDocumentos: true },
    sindico: { podeEditar: true, podeEditarDocumentos: false },
    porteiro: { podeEditar: true, podeEditarDocumentos: false },
    morador: { podeEditar: false, podeEditarDocumentos: false },
    visitante: { podeEditar: false, podeEditarDocumentos: false }
  };
  const usuarioPermissao = permissoes[nivel] || permissoes.visitante;


  // Função para carregar lista moradores do localStorage
  function carregarListaMoradores() {
    const dados = localStorage.getItem('moradores');
    if (!dados) return [];
    try {
      return JSON.parse(dados);
    } catch {
      return [];
    }
  }
  // Função para salvar lista moradores no localStorage
  function salvarListaMoradores(lista) {
    localStorage.setItem('moradores', JSON.stringify(lista));
  }

  // Gera novo ID incremental para morador
  function gerarNovoId(lista) {
    if (lista.length === 0) return 1;
    return Math.max(...lista.map(m => m.id || 0)) + 1;
  }

  // Função para coletar dados do formulário
  function coletarDados() {
    const dados = {
      id: moradorAtual.id,
      nome: document.getElementById('nome').value,
      cpf: document.getElementById('cpf').value,
      rg: document.getElementById('rg').value,
      cnh: document.getElementById('cnh').value,
      rua: document.getElementById('rua').value,
      quadra: document.getElementById('quadra').value,
      lote: document.getElementById('lote').value,
      numero: document.getElementById('numero').value,
      cep: document.getElementById('cep').value,
      proximo: document.getElementById('proximo').value,
      placas: [],
      familiares: [],
      permissoes: document.getElementById('permissoes').value,
      observacoes: document.getElementById('observacoes').value,
      penalidades: document.getElementById('penalidades').value,
      foto3x4: document.getElementById('imgFoto').src || '',
      ultimaEdicao: new Date().toISOString()
    };

    // Coleta placas
    const placasContainer = document.getElementById('placasContainer');
    placasContainer.querySelectorAll('input[type="text"]').forEach(input => {
      if (input.value.trim() !== '') dados.placas.push(input.value.trim());
    });

    // Coleta familiares
    const familiaresContainer = document.getElementById('familiaresContainer');
    familiaresContainer.querySelectorAll('div').forEach(divFamiliar => {
      const inputs = divFamiliar.querySelectorAll('input[type="text"]');
      if (inputs.length < 5) return;

      let fam = {
        nome: inputs[0].value.trim(),
        parentesco: inputs[1].value.trim(),
        cpf: inputs[2].value.trim(),
        rg: inputs[3].value.trim(),
        cnh: inputs[4].value.trim(),
        placas: []
      };

      const placasInputs = divFamiliar.querySelectorAll('div > input[type="text"]');
      placasInputs.forEach(pi => {
        if (pi.value.trim() !== '') fam.placas.push(pi.value.trim());
      });

      if (fam.nome !== '') dados.familiares.push(fam);
    });

    return dados;
  }

  // Função para preencher formulário com dados do morador
  function preencherFormulario(dados) {
    document.getElementById('nome').value = dados.nome || '';
    document.getElementById('cpf').value = dados.cpf || '';
    document.getElementById('rg').value = dados.rg || '';
    document.getElementById('cnh').value = dados.cnh || '';
    document.getElementById('rua').value = dados.rua || '';
    document.getElementById('quadra').value = dados.quadra || '';
    document.getElementById('lote').value = dados.lote || '';
    document.getElementById('numero').value = dados.numero || '';
    document.getElementById('cep').value = dados.cep || '';
    document.getElementById('proximo').value = dados.proximo || '';

    // Limpar e preencher placas
    const placasContainer = document.getElementById('placasContainer');
    placasContainer.innerHTML = '';
    (dados.placas || []).forEach(p => adicionarPlaca(p));

    // Limpar e preencher familiares
    const familiaresContainer = document.getElementById('familiaresContainer');
    familiaresContainer.innerHTML = '';
    (dados.familiares || []).forEach(fam => adicionarFamiliar(fam));

    document.getElementById('permissoes').value = dados.permissoes || '';
    document.getElementById('observacoes').value = dados.observacoes || '';
    document.getElementById('penalidades').value = dados.penalidades || '';
    document.getElementById('imgFoto').src = dados.foto3x4 || '';

    if (dados.ultimaEdicao) {
      const dt = new Date(dados.ultimaEdicao);
      const dtLocal = dt.toISOString().slice(0,16);
      document.getElementById('ultimaEdicao').value = dtLocal;
    } else {
      document.getElementById('ultimaEdicao').value = '';
    }
  }

  // Funções para criar campos placas e familiares (mantidas igual)
  function criarCampoPlaca(valor = '') {
    const div = document.createElement('div');
    div.style.marginTop = '5px';

    const input = document.createElement('input');
    input.type = 'text';
    input.placeholder = 'Placa do veículo';
    input.value = valor;
    input.disabled = !usuarioPermissao.podeEditar;
    div.appendChild(input);

    if (usuarioPermissao.podeEditar) {
      const btnRemover = document.createElement('button');
      btnRemover.type = 'button';
      btnRemover.textContent = 'Remover';
      btnRemover.style.marginLeft = '10px';
      btnRemover.onclick = () => div.remove();
      div.appendChild(btnRemover);
    }
    return div;
  }

  function criarCampoFamiliar(familiar = {}) {
    const div = document.createElement('div');
    div.style.border = '1px solid #ccc';
    div.style.padding = '10px';
    div.style.marginTop = '10px';
    div.style.borderRadius = '5px';
    div.style.background = '#fafafa';

    // Nome e Parentesco
    const nomeLabel = document.createElement('label');
    nomeLabel.textContent = 'Nome:';
    const nomeInput = document.createElement('input');
    nomeInput.type = 'text';
    nomeInput.value = familiar.nome || '';
    nomeInput.disabled = !usuarioPermissao.podeEditar;
    nomeLabel.appendChild(nomeInput);

    const parentescoLabel = document.createElement('label');
    parentescoLabel.textContent = 'Parentesco / Relação:';
    const parentescoInput = document.createElement('input');
    parentescoInput.type = 'text';
    parentescoInput.value = familiar.parentesco || '';
    parentescoInput.disabled = !usuarioPermissao.podeEditar;
    parentescoLabel.appendChild(parentescoInput);

    // Documentos
    const cpfLabel = document.createElement('label');
    cpfLabel.textContent = 'CPF:';
    const cpfInput = document.createElement('input');
    cpfInput.type = 'text';
    cpfInput.value = familiar.cpf || '';
    cpfInput.disabled = !usuarioPermissao.podeEditar;
    cpfLabel.appendChild(cpfInput);

    const rgLabel = document.createElement('label');
    rgLabel.textContent = 'RG:';
    const rgInput = document.createElement('input');
    rgInput.type = 'text';
    rgInput.value = familiar.rg || '';
    rgInput.disabled = !usuarioPermissao.podeEditar;
    rgLabel.appendChild(rgInput);

    const cnhLabel = document.createElement('label');
    cnhLabel.textContent = 'CNH:';
    const cnhInput = document.createElement('input');
    cnhInput.type = 'text';
    cnhInput.value = familiar.cnh || '';
    cnhInput.disabled = !usuarioPermissao.podeEditar;
    cnhLabel.appendChild(cnhInput);

    // Placas do familiar
    const placasFamiliarContainer = document.createElement('div');
    placasFamiliarContainer.style.marginTop = '5px';

    (familiar.placas || []).forEach(p => {
      const placaInput = document.createElement('input');
      placaInput.type = 'text';
      placaInput.placeholder = 'Placa do veículo';
      placaInput.value = p;
      placaInput.disabled = !usuarioPermissao.podeEditar;
      placasFamiliarContainer.appendChild(placaInput);
    });

    if (usuarioPermissao.podeEditar) {
      const btnAddPlacaFamiliar = document.createElement('button');
      btnAddPlacaFamiliar.type = 'button';
      btnAddPlacaFamiliar.textContent = 'Adicionar Placa';
      btnAddPlacaFamiliar.style.display = 'block';
      btnAddPlacaFamiliar.style.marginTop = '5px';
      btnAddPlacaFamiliar.onclick = () => {
        const newPlacaInput = document.createElement('input');
        newPlacaInput.type = 'text';
        newPlacaInput.placeholder = 'Placa do veículo';
        newPlacaInput.disabled = false;
        placasFamiliarContainer.appendChild(newPlacaInput);
      };
      placasFamiliarContainer.appendChild(btnAddPlacaFamiliar);
    }

    div.appendChild(nomeLabel);
    div.appendChild(parentescoLabel);
    div.appendChild(cpfLabel);
    div.appendChild(rgLabel);
    div.appendChild(cnhLabel);
    div.appendChild(document.createTextNode('Placas do Familiar:'));
    div.appendChild(placasFamiliarContainer);

    if (usuarioPermissao.podeEditar) {
      const btnRemoverFamiliar = document.createElement('button');
      btnRemoverFamiliar.type = 'button';
      btnRemoverFamiliar.textContent = 'Remover Familiar/Contato';
      btnRemoverFamiliar.style.marginTop = '10px';
      btnRemoverFamiliar.onclick = () => div.remove();
      div.appendChild(btnRemoverFamiliar);
    }

    return div;
  }

  function adicionarPlaca(valor = '') {
    const placasContainer = document.getElementById('placasContainer');
    const campo = criarCampoPlaca(valor);
    placasContainer.appendChild(campo);
  }

  function adicionarFamiliar(familiar = {}) {
    const familiaresContainer = document.getElementById('familiaresContainer');
    const campo = criarCampoFamiliar(familiar);
    familiaresContainer.appendChild(campo);
  }

  // Inicialização
  let moradores = carregarListaMoradores();
  let moradorAtual = {};

  // Se for edição, carrega dados do morador
  if (modoNovo) {
    moradorAtual = { id: gerarNovoId(moradores) };
  } else if (idMorador) {
    moradorAtual = moradores.find(m => m.id == idMorador) || { id: gerarNovoId(moradores) };
  } else {
    moradorAtual = { id: gerarNovoId(moradores) };
  }

  preencherFormulario(moradorAtual);

  // Exibir data e hora atual
  function atualizarDataHoraAtual() {
    const el = document.getElementById('dataHoraAtual');
    const agora = new Date();
    const dia = String(agora.getDate()).padStart(2, '0');
    const mes = String(agora.getMonth() + 1).padStart(2, '0');
    const ano = agora.getFullYear();
    const horas = String(agora.getHours()).padStart(2, '0');
    const minutos = String(agora.getMinutes()).padStart(2, '0');
    const segundos = String(agora.getSeconds()).padStart(2, '0');
    el.textContent = `${dia}/${mes}/${ano}, ${horas}:${minutos}:${segundos}`;
  }
  setInterval(atualizarDataHoraAtual, 1000);
  atualizarDataHoraAtual();

  // Eventos para adicionar placas e familiares
  document.getElementById('btnAddPlaca').onclick = () => {
    if (!usuarioPermissao.podeEditar) return alert('Você não tem permissão para editar placas.');
    adicionarPlaca();
  };
  document.getElementById('btnAddFamiliar').onclick = () => {
    if (!usuarioPermissao.podeEditar) return alert('Você não tem permissão para adicionar familiares.');
    adicionarFamiliar();
  };

  // Evento para carregar foto 3x4 e mostrar preview
  document.getElementById('foto3x4').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = function(evt) {
      document.getElementById('imgFoto').src = evt.target.result;
    };
    reader.readAsDataURL(file);
  });

  // Salvar dados no localStorage e baixar JSON
  document.getElementById('btnSalvar').onclick = () => {
    if (!usuarioPermissao.podeEditar) {
      alert('Você não tem permissão para salvar dados.');
      return;
    }
    const dados = coletarDados();

    // Atualiza última edição
const agora = new Date();
agora.setHours(agora.getHours() - 3);
dados.ultimaEdicao = agora.toISOString();

    // Atualiza ou adiciona na lista
    const idx = moradores.findIndex(m => m.id === dados.id);
    if (idx >= 0) {
      moradores[idx] = dados;
    } else {
      moradores.push(dados);
    }
    salvarListaMoradores(moradores);
    moradorAtual = dados;
    preencherFormulario(moradorAtual);

    // Baixar arquivo JSON
    const jsonStr = JSON.stringify(dados, null, 2);
    const blob = new Blob([jsonStr], {type: 'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `morador_${dados.id}.json`;
    a.click();
    URL.revokeObjectURL(url);

    document.getElementById('statusMsg').textContent = 'Dados salvos com sucesso!';
    document.getElementById('errorMsg').textContent = '';
  };

  // Carregar dados do arquivo JSON
  document.getElementById('btnCarregar').onclick = () => {
    document.getElementById('inputCarregarArquivo').click();
  };
  document.getElementById('inputCarregarArquivo').addEventListener('change', function() {
    const file = this.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = function(evt) {
      try {
        const dados = JSON.parse(evt.target.result);
        moradorAtual = dados;
        preencherFormulario(dados);
        document.getElementById('statusMsg').textContent = 'Dados carregados do arquivo.';
        document.getElementById('errorMsg').textContent = '';
      } catch(e) {
        document.getElementById('errorMsg').textContent = 'Erro ao carregar arquivo JSON.';
        document.getElementById('statusMsg').textContent = '';
      }
    };
    reader.readAsText(file);
    this.value = '';
  });

// Mostrar lista de moradores
document.getElementById('btnBuscar').onclick = () => {
  atualizarListaMoradores();
};

// Filtrar moradores na lista
document.getElementById('buscaMorador').addEventListener('input', atualizarListaMoradores);

function atualizarListaMoradores() {
  const filtro = document.getElementById('buscaMorador').value.toLowerCase();
  const lista = moradores.filter(m => {
    return (m.nome && m.nome.toLowerCase().includes(filtro)) ||
           (m.cpf && m.cpf.toLowerCase().includes(filtro)) ||
           (m.rg && m.rg.toLowerCase().includes(filtro));
  });

  const ul = document.getElementById('resultadosMoradores');
  ul.innerHTML = '';

  if (lista.length === 0) {
    const li = document.createElement('li');
    li.textContent = 'Nenhum morador encontrado.';
    ul.appendChild(li);
    return;
  }

  lista.forEach(m => {
    const li = document.createElement('li');

    const nomeSpan = document.createElement('span');
    nomeSpan.textContent = `${m.nome} - CPF: ${m.cpf} - RG: ${m.rg}`;
    li.appendChild(nomeSpan);

    // Botão Editar
    const btnEditar = document.createElement('button');
    btnEditar.textContent = 'Editar';
    btnEditar.onclick = () => {
      moradorAtual = m;
      preencherFormulario(m);
    };
    li.appendChild(btnEditar);

    // Botão Apagar
    const btnApagar = document.createElement('button');
    btnApagar.textContent = 'Apagar';
    btnApagar.onclick = () => {
      const senha = prompt('Digite a senha do síndico ou admin para apagar:');
      const senhasAceitas = ['sindico123', 'admin123']; // Altere aqui as senhas válidas
      if (!senhasAceitas.includes(senha)) {
        alert('Senha incorreta.');
        return;
      }
      if (confirm(`Tem certeza que deseja apagar ${m.nome} (CPF: ${m.cpf})?`)) {
        const idx = moradores.findIndex(x => x.id === m.id);
        if (idx >= 0) {
          moradores.splice(idx, 1);
          salvarListaMoradores(moradores);
          atualizarListaMoradores();
          alert('Morador apagado com sucesso.');
        }
      }
    };
    li.appendChild(btnApagar);

    ul.appendChild(li);
  });
}



</script>
</body>
</html>
